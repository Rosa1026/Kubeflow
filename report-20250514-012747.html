
        <html>
        <head>
            <meta charset="UTF-8">
            <style>
                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}
                h1 {{ color: #2c3e50; }}
                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}
                h3 {{ color: #2980b9; }}
                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}
                section {{ margin-bottom: 30px; }}
                .keyword {{ color: red; font-weight: bold; }}
            </style>
        </head>
        <body>
        <h1>Kubernetes 장애 점검 리포트</h1>
        <section><h2>Pod: etcd-k8s-kubeflow-master01 (Namespace: kube-system) - 감지된 키워드: deadline exceeded</h2>
<h3>Log 결과 (최근 10줄)</h3><pre>{&quot;level&quot;:&quot;warn&quot;,&quot;ts&quot;:&quot;2025-04-25T06:04:16.458245Z&quot;,&quot;caller&quot;:&quot;etcdserver/util.go:170&quot;,&quot;msg&quot;:&quot;apply request took too long&quot;,&quot;took&quot;:&quot;2.002736949s&quot;,&quot;expected-duration&quot;:&quot;100ms&quot;,&quot;prefix&quot;:&quot;read-only range &quot;,&quot;request&quot;:&quot;key:\&quot;/registry/health\&quot; &quot;,&quot;response&quot;:&quot;&quot;,&quot;error&quot;:&quot;context <span class='keyword'>deadline exceeded</span>&quot;}
{&quot;level&quot;:&quot;warn&quot;,&quot;ts&quot;:&quot;2025-04-25T06:09:16.452199Z&quot;,&quot;caller&quot;:&quot;etcdserver/util.go:170&quot;,&quot;msg&quot;:&quot;apply request took too long&quot;,&quot;took&quot;:&quot;2.007711416s&quot;,&quot;expected-duration&quot;:&quot;100ms&quot;,&quot;prefix&quot;:&quot;read-only range &quot;,&quot;request&quot;:&quot;key:\&quot;/registry/health\&quot; &quot;,&quot;response&quot;:&quot;&quot;,&quot;error&quot;:&quot;context <span class='keyword'>deadline exceeded</span>&quot;}
{&quot;level&quot;:&quot;warn&quot;,&quot;ts&quot;:&quot;2025-04-25T06:14:16.445792Z&quot;,&quot;caller&quot;:&quot;etcdserver/util.go:170&quot;,&quot;msg&quot;:&quot;apply request took too long&quot;,&quot;took&quot;:&quot;2.000352598s&quot;,&quot;expected-duration&quot;:&quot;100ms&quot;,&quot;prefix&quot;:&quot;read-only range &quot;,&quot;request&quot;:&quot;key:\&quot;/registry/health\&quot; &quot;,&quot;response&quot;:&quot;&quot;,&quot;error&quot;:&quot;context <span class='keyword'>deadline exceeded</span>&quot;}
{&quot;level&quot;:&quot;warn&quot;,&quot;ts&quot;:&quot;2025-04-25T06:24:17.342252Z&quot;,&quot;caller&quot;:&quot;etcdserver/util.go:170&quot;,&quot;msg&quot;:&quot;apply request took too long&quot;,&quot;took&quot;:&quot;2.000196896s&quot;,&quot;expected-duration&quot;:&quot;100ms&quot;,&quot;prefix&quot;:&quot;read-only range &quot;,&quot;request&quot;:&quot;key:\&quot;/registry/health\&quot; &quot;,&quot;response&quot;:&quot;&quot;,&quot;error&quot;:&quot;context <span class='keyword'>deadline exceeded</span>&quot;}
{&quot;level&quot;:&quot;warn&quot;,&quot;ts&quot;:&quot;2025-04-25T06:24:17.444017Z&quot;,&quot;caller&quot;:&quot;etcdserver/util.go:170&quot;,&quot;msg&quot;:&quot;apply request took too long&quot;,&quot;took&quot;:&quot;1.999925858s&quot;,&quot;expected-duration&quot;:&quot;100ms&quot;,&quot;prefix&quot;:&quot;read-only range &quot;,&quot;request&quot;:&quot;key:\&quot;/registry/health\&quot; &quot;,&quot;response&quot;:&quot;&quot;,&quot;error&quot;:&quot;context <span class='keyword'>deadline exceeded</span>&quot;}
</pre>
</section>
<section><h2>Pod: ml-pipeline-persistenceagent-7655ddbcfb-mnjmg (Namespace: kubeflow) - 감지된 키워드: deadline exceeded, failed to start, crashloopbackoff, oomkilled, evicted, node not ready</h2>
<h3>Log 결과 (최근 10줄)</h3><pre>time=&quot;2025-05-14T01:26:06Z&quot; level=error msg=&quot;Transient failure while syncing resource (kubeflow-user-example-com/pod-log-pipeline-advance-version-72k9g): CustomError (code: 0): Syncing Workflow (pod-log-pipeline-advance-version-72k9g): transient failure: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;e23f5950-4c81-43d7-b227-3a0dd9530e2a\&quot;,\&quot;resourceVersion\&quot;:\&quot;9362645\&quot;,\&quot;generation\&quot;:2,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Running\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Clone of Clone of Run of pod_log_pipeline_advance_version_at_2025-05-14T01:20:12.052Z (a1615)\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-72k9g\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Pending\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}}},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;e23f5950-4c81-43d7-b227-3a0dd9530e2a\&quot;,\&quot;resourceVersion\&quot;:\&quot;9362645\&quot;,\&quot;generation\&quot;:2,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Running\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Clone of Clone of Run of pod_log_pipeline_advance_version_at_2025-05-14T01:20:12.052Z (a1615)\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-72k9g\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Pending\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}}},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired&quot;
time=&quot;2025-05-14T01:26:10Z&quot; level=error msg=&quot;Transient failure while syncing resource (kubeflow-user-example-com/pod-log-pipeline-advance-version-72k9g): CustomError (code: 0): Syncing Workflow (pod-log-pipeline-advance-version-72k9g): transient failure: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;e23f5950-4c81-43d7-b227-3a0dd9530e2a\&quot;,\&quot;resourceVersion\&quot;:\&quot;9362645\&quot;,\&quot;generation\&quot;:2,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Running\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Clone of Clone of Run of pod_log_pipeline_advance_version_at_2025-05-14T01:20:12.052Z (a1615)\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-72k9g\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Pending\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}}},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;e23f5950-4c81-43d7-b227-3a0dd9530e2a\&quot;,\&quot;resourceVersion\&quot;:\&quot;9362645\&quot;,\&quot;generation\&quot;:2,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Running\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Clone of Clone of Run of pod_log_pipeline_advance_version_at_2025-05-14T01:20:12.052Z (a1615)\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-72k9g\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Pending\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}}},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired&quot;
time=&quot;2025-05-14T01:26:18Z&quot; level=error msg=&quot;Transient failure while syncing resource (kubeflow-user-example-com/pod-log-pipeline-advance-version-72k9g): CustomError (code: 0): Syncing Workflow (pod-log-pipeline-advance-version-72k9g): transient failure: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;e23f5950-4c81-43d7-b227-3a0dd9530e2a\&quot;,\&quot;resourceVersion\&quot;:\&quot;9362725\&quot;,\&quot;generation\&quot;:3,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Running\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Clone of Clone of Run of pod_log_pipeline_advance_version_at_2025-05-14T01:20:12.052Z (a1615)\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:15Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;1/2\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-72k9g\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;1/2\&quot;,\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root\&quot;,\&quot;displayName\&quot;:\&quot;root\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;root\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:15Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;264\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-2202052910\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-2202052910\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-2202052910\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root.collect-filtered-logs-driver\&quot;,\&quot;displayName\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Pending\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:15Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;264\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]}},\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:26:09Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;value\&quot;:\&quot;264\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;value\&quot;:\&quot;0\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-72k9g/2025/05/14/pod-log-pipeline-advance-version-72k9g-system-dag-driver-3895235018/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;}},\&quot;conditions\&quot;:[{\&quot;type\&quot;:\&quot;PodRunning\&quot;,\&quot;status\&quot;:\&quot;False\&quot;}],\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;e23f5950-4c81-43d7-b227-3a0dd9530e2a\&quot;,\&quot;resourceVersion\&quot;:\&quot;9362725\&quot;,\&quot;generation\&quot;:3,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Running\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Clone of Clone of Run of pod_log_pipeline_advance_version_at_2025-05-14T01:20:12.052Z (a1615)\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:26:15Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;db361801-a474-41bf-b142-16ccb201ed7a\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;1/2\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-72k9g\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;1/2\&quot;,\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root\&quot;,\&quot;displayName\&quot;:\&quot;root\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;root\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Running\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:15Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;264\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-2202052910\&quot;]},\&quot;pod-log-pipeline-advance-version-72k9g-2202052910\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-2202052910\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root.collect-filtered-logs-driver\&quot;,\&quot;displayName\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Pending\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:15Z\&quot;,\&quot;finishedAt\&quot;:null,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n\\\\n    import html\\\\n    import subprocess\\\\n    import os\\\\n    import json\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    # HTML 특수 문자 처리 함수\\\\n    def sanitize_for_html(text):\\\\n        return html.escape(text, quote=True)\\\\n\\\\n    # kubectl 설치\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([ \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot; ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n\\\\n    # Pod 목록 수집\\\\n    pods_output = subprocess.getoutput(\\\\\\\&quot;kubectl get pods --all-namespaces -o custom-columns=&#x27;NAMESPACE:.metadata.namespace,NAME:.metadata.name&#x27; --no-headers\\\\\\\&quot;)\\\\n    pod_lines = pods_output.strip().split(\\\\\\\&quot;\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n    # HTML 작성 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        for line in pod_lines:\\\\n            if not line.strip():\\\\n                continue\\\\n            try:\\\\n                namespace, pod_name = line.split()\\\\n            except ValueError:\\\\n                continue\\\\n\\\\n            if namespace == excluded_namespace:\\\\n                continue\\\\n\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                sanitize_for_html(l) for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                sanitize_for_html(l) for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]  # 최근 10줄\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003ePod: {pod_name} (Namespace: {namespace}) - 감지된 키워드: {&#x27;, &#x27;.join(matched_keywords)}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace}\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    sanitize_for_html(l) for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                if matched_events:\\\\n                    namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        for ns, events in namespace_events.items():\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            for line in events:\\\\n                for kw in event_kw_list:\\\\n                    if kw in line.lower():\\\\n                        line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;264\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]}},\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g-3895235018\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-72k9g\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:26:05Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:26:09Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;value\&quot;:\&quot;264\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;value\&quot;:\&quot;0\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-72k9g/2025/05/14/pod-log-pipeline-advance-version-72k9g-system-dag-driver-3895235018/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-72k9g-1918575441\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;}},\&quot;conditions\&quot;:[{\&quot;type\&quot;:\&quot;PodRunning\&quot;,\&quot;status\&quot;:\&quot;False\&quot;}],\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired&quot;
time=&quot;2025-05-14T01:26:41Z&quot; level=error msg=&quot;Transient failure while syncing resource (kubeflow-user-example-com/pod-log-pipeline-advance-version-m9f6j): CustomError (code: 0): Syncing Workflow (pod-log-pipeline-advance-version-m9f6j): transient failure: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;3c3f1441-a0c3-4056-944d-3cb527f9dff1\&quot;,\&quot;resourceVersion\&quot;:\&quot;9358847\&quot;,\&quot;generation\&quot;:9,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;workflows.argoproj.io/completed\&quot;:\&quot;true\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Failed\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Run of pod_log_pipeline_advance\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/completed\&quot;:{},\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;4/5\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;4/5\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:137,\&quot;memory\&quot;:134},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-2094096536\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-1224221736\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-1224221736\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.collect-filtered-logs-driver\&quot;,\&quot;displayName\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:06Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:14:11Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:4,\&quot;memory\&quot;:3},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;254\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:\\\\\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\\\\\&quot;, \\\\\\\&quot;log_keywords\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;}]}}, \\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}, \\\\\\\&quot;log_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}}}, \\\\\\\&quot;outputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-collect-filtered-logs\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-driver-1224221736/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.collect-filtered-logs\&quot;,\&quot;displayName\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;system-container-executor\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:16Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:21Z\&quot;,\&quot;progress\&quot;:\&quot;2/3\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:130,\&quot;memory\&quot;:129},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;254\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:\\\\\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\\\\\&quot;, \\\\\\\&quot;log_keywords\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;}]}}, \\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}, \\\\\\\&quot;log_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}}}, \\\\\\\&quot;outputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-collect-filtered-logs\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root\&quot;,\&quot;displayName\&quot;:\&quot;root\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;root\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:06Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;3/4\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:134,\&quot;memory\&quot;:132},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-1224221736\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-2094096536\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2094096536\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:14:00Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;value\&quot;:\&quot;0\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-dag-driver-2094096536/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-3160090457\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3160090457\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.upload-to-github-driver\&quot;,\&quot;displayName\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:15:21Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:24Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;255\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;name\\\\\\\&quot;:\\\\\\\&quot;52\\\\\\\&quot;, \\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;instanceSchema\\\\\\\&quot;:\\\\\\\&quot;\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;, \\\\\\\&quot;metadata\\\\\\\&quot;:{\\\\\\\&quot;display_name\\\\\\\&quot;:\\\\\\\&quot;output_report\\\\\\\&quot;}}]}}, \\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:\\\\\\\&quot;report\\\\\\\&quot;, \\\\\\\&quot;github_token\\\\\\\&quot;:\\\\\\\&quot;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\\\\\\\&quot;, \\\\\\\&quot;repo_url\\\\\\\&quot;:\\\\\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}, \\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;github_token\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;repo_url\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-upload-to-github\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-driver-3160090457/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.upload-to-github\&quot;,\&quot;displayName\&quot;:\&quot;upload-to-github\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;system-container-executor\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:15:31Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:25,\&quot;memory\&quot;:25},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;255\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;name\\\\\\\&quot;:\\\\\\\&quot;52\\\\\\\&quot;, \\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;instanceSchema\\\\\\\&quot;:\\\\\\\&quot;\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;, \\\\\\\&quot;metadata\\\\\\\&quot;:{\\\\\\\&quot;display_name\\\\\\\&quot;:\\\\\\\&quot;output_report\\\\\\\&quot;}}]}}, \\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:\\\\\\\&quot;report\\\\\\\&quot;, \\\\\\\&quot;github_token\\\\\\\&quot;:\\\\\\\&quot;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\\\\\\\&quot;, \\\\\\\&quot;repo_url\\\\\\\&quot;:\\\\\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}, \\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;github_token\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;repo_url\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-upload-to-github\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.collect-filtered-logs.executor\&quot;,\&quot;displayName\&quot;:\&quot;executor\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-impl\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:16Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:11Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:102,\&quot;memory\&quot;:102},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;254\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:\\\\\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\\\\\&quot;, \\\\\\\&quot;log_keywords\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;}]}}, \\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}, \\\\\\\&quot;log_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}}}, \\\\\\\&quot;outputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-collect-filtered-logs\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;}]},\&quot;outputs\&quot;:{\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-impl-3948683934/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3160090457\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.upload-to-github.executor\&quot;,\&quot;displayName\&quot;:\&quot;executor\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-impl\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;,\&quot;message\&quot;:\&quot;Error (exit code 1)\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:15:31Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:46Z\&quot;,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:25,\&quot;memory\&quot;:25},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;255\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;name\\\\\\\&quot;:\\\\\\\&quot;52\\\\\\\&quot;, \\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;instanceSchema\\\\\\\&quot;:\\\\\\\&quot;\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;, \\\\\\\&quot;metadata\\\\\\\&quot;:{\\\\\\\&quot;display_name\\\\\\\&quot;:\\\\\\\&quot;output_report\\\\\\\&quot;}}]}}, \\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:\\\\\\\&quot;report\\\\\\\&quot;, \\\\\\\&quot;github_token\\\\\\\&quot;:\\\\\\\&quot;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\\\\\\\&quot;, \\\\\\\&quot;repo_url\\\\\\\&quot;:\\\\\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}, \\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;github_token\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;repo_url\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-upload-to-github\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;}]},\&quot;outputs\&quot;:{\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-impl-58911351/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;1\&quot;},\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;}},\&quot;conditions\&quot;:[{\&quot;type\&quot;:\&quot;PodRunning\&quot;,\&quot;status\&quot;:\&quot;False\&quot;},{\&quot;type\&quot;:\&quot;Completed\&quot;,\&quot;status\&quot;:\&quot;True\&quot;}],\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:137,\&quot;memory\&quot;:134},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired: CustomError (code: 0): Error while reporting workflow resource (code: Unauthenticated, message: Jwt is expired): rpc error: code = Unauthenticated desc = Jwt is expired, {\&quot;metadata\&quot;:{\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;generateName\&quot;:\&quot;pod-log-pipeline-advance-version-\&quot;,\&quot;namespace\&quot;:\&quot;kubeflow-user-example-com\&quot;,\&quot;uid\&quot;:\&quot;3c3f1441-a0c3-4056-944d-3cb527f9dff1\&quot;,\&quot;resourceVersion\&quot;:\&quot;9358847\&quot;,\&quot;generation\&quot;:9,\&quot;creationTimestamp\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;workflows.argoproj.io/completed\&quot;:\&quot;true\&quot;,\&quot;workflows.argoproj.io/phase\&quot;:\&quot;Failed\&quot;},\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/components-root\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;,\&quot;pipelines.kubeflow.org/run_name\&quot;:\&quot;Run of pod_log_pipeline_advance\&quot;,\&quot;workflows.argoproj.io/pod-name-format\&quot;:\&quot;v2\&quot;},\&quot;managedFields\&quot;:[{\&quot;manager\&quot;:\&quot;apiserver\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/components-root\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-collect-filtered-logs\&quot;:{},\&quot;f:pipelines.kubeflow.org/implementations-comp-upload-to-github\&quot;:{},\&quot;f:pipelines.kubeflow.org/run_name\&quot;:{}},\&quot;f:generateName\&quot;:{},\&quot;f:labels\&quot;:{\&quot;.\&quot;:{},\&quot;f:pipeline/runid\&quot;:{}}},\&quot;f:spec\&quot;:{}}},{\&quot;manager\&quot;:\&quot;workflow-controller\&quot;,\&quot;operation\&quot;:\&quot;Update\&quot;,\&quot;apiVersion\&quot;:\&quot;argoproj.io/v1alpha1\&quot;,\&quot;time\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;fieldsType\&quot;:\&quot;FieldsV1\&quot;,\&quot;fieldsV1\&quot;:{\&quot;f:metadata\&quot;:{\&quot;f:annotations\&quot;:{\&quot;f:workflows.argoproj.io/pod-name-format\&quot;:{}},\&quot;f:labels\&quot;:{\&quot;f:workflows.argoproj.io/completed\&quot;:{},\&quot;f:workflows.argoproj.io/phase\&quot;:{}}},\&quot;f:status\&quot;:{}}}]},\&quot;spec\&quot;:{\&quot;templates\&quot;:[{\&quot;name\&quot;:\&quot;system-container-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;CONTAINER\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--container\&quot;,\&quot;{{inputs.parameters.container}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--cached_decision_path\&quot;,\&quot;{{outputs.parameters.cached-decision.path}}\&quot;,\&quot;--pod_spec_patch_path\&quot;,\&quot;{{outputs.parameters.pod-spec-patch.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;,\&quot;--kubernetes_config\&quot;,\&quot;{{inputs.parameters.kubernetes-config}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;system-container-executor\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;executor\&quot;,\&quot;template\&quot;:\&quot;system-container-impl\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;}]},\&quot;when\&quot;:\&quot;{{inputs.parameters.cached-decision}} != true\&quot;}]}},{\&quot;name\&quot;:\&quot;system-container-impl\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/should-be-overridden-during-runtime\&quot;,\&quot;command\&quot;:[\&quot;should-be-overridden-during-runtime\&quot;],\&quot;envFrom\&quot;:[{\&quot;configMapRef\&quot;:{\&quot;name\&quot;:\&quot;metadata-grpc-configmap\&quot;,\&quot;optional\&quot;:true}}],\&quot;env\&quot;:[{\&quot;name\&quot;:\&quot;KFP_POD_NAME\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.name\&quot;}}},{\&quot;name\&quot;:\&quot;KFP_POD_UID\&quot;,\&quot;valueFrom\&quot;:{\&quot;fieldRef\&quot;:{\&quot;fieldPath\&quot;:\&quot;metadata.uid\&quot;}}}],\&quot;resources\&quot;:{},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]},\&quot;volumes\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;emptyDir\&quot;:{}}],\&quot;initContainers\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-launcher@sha256:8fe5e6e4718f20b021736022ad3741ddf2abd82aa58c86ae13e89736fdc3f08f\&quot;,\&quot;command\&quot;:[\&quot;launcher-v2\&quot;,\&quot;--copy\&quot;,\&quot;/kfp-launcher/launch\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;128Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;}},\&quot;volumeMounts\&quot;:[{\&quot;name\&quot;:\&quot;kfp-launcher\&quot;,\&quot;mountPath\&quot;:\&quot;/kfp-launcher\&quot;}]}],\&quot;podSpecPatch\&quot;:\&quot;{{inputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;}]},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-collect-filtered-logs}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]}},{\&quot;name\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.collect-filtered-logs-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs-driver.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;template\&quot;:\&quot;system-container-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/implementations-comp-upload-to-github}}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{inputs.parameters.parent-dag-id}}\&quot;}]},\&quot;depends\&quot;:\&quot;collect-filtered-logs.Succeeded\&quot;},{\&quot;name\&quot;:\&quot;upload-to-github\&quot;,\&quot;template\&quot;:\&quot;system-container-executor\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.pod-spec-patch}}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;{{tasks.upload-to-github-driver.outputs.parameters.cached-decision}}\&quot;}]},\&quot;depends\&quot;:\&quot;upload-to-github-driver.Succeeded\&quot;}]}},{\&quot;name\&quot;:\&quot;system-dag-driver\&quot;,\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}]},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;container\&quot;:{\&quot;name\&quot;:\&quot;\&quot;,\&quot;image\&quot;:\&quot;gcr.io/ml-pipeline/kfp-driver@sha256:3c0665cd36aa87e4359a4c8b6271dcba5bdd817815cd0496ed12eb5dde5fd2ec\&quot;,\&quot;command\&quot;:[\&quot;driver\&quot;],\&quot;args\&quot;:[\&quot;--type\&quot;,\&quot;{{inputs.parameters.driver-type}}\&quot;,\&quot;--pipeline_name\&quot;,\&quot;pod-log-pipeline-advance-version\&quot;,\&quot;--run_id\&quot;,\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;--dag_execution_id\&quot;,\&quot;{{inputs.parameters.parent-dag-id}}\&quot;,\&quot;--component\&quot;,\&quot;{{inputs.parameters.component}}\&quot;,\&quot;--task\&quot;,\&quot;{{inputs.parameters.task}}\&quot;,\&quot;--runtime_config\&quot;,\&quot;{{inputs.parameters.runtime-config}}\&quot;,\&quot;--iteration_index\&quot;,\&quot;{{inputs.parameters.iteration-index}}\&quot;,\&quot;--execution_id_path\&quot;,\&quot;{{outputs.parameters.execution-id.path}}\&quot;,\&quot;--iteration_count_path\&quot;,\&quot;{{outputs.parameters.iteration-count.path}}\&quot;,\&quot;--condition_path\&quot;,\&quot;{{outputs.parameters.condition.path}}\&quot;],\&quot;resources\&quot;:{\&quot;limits\&quot;:{\&quot;cpu\&quot;:\&quot;500m\&quot;,\&quot;memory\&quot;:\&quot;512Mi\&quot;},\&quot;requests\&quot;:{\&quot;cpu\&quot;:\&quot;100m\&quot;,\&quot;memory\&quot;:\&quot;64Mi\&quot;}}}},{\&quot;name\&quot;:\&quot;entrypoint\&quot;,\&quot;inputs\&quot;:{},\&quot;outputs\&quot;:{},\&quot;metadata\&quot;:{\&quot;annotations\&quot;:{\&quot;sidecar.istio.io/inject\&quot;:\&quot;false\&quot;}},\&quot;dag\&quot;:{\&quot;tasks\&quot;:[{\&quot;name\&quot;:\&quot;root-driver\&quot;,\&quot;template\&quot;:\&quot;system-dag-driver\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{{workflow.annotations.pipelines.kubeflow.org/components-root}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]}},{\&quot;name\&quot;:\&quot;root\&quot;,\&quot;template\&quot;:\&quot;root\&quot;,\&quot;arguments\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;{{tasks.root-driver.outputs.parameters.execution-id}}\&quot;},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;depends\&quot;:\&quot;root-driver.Succeeded\&quot;}]}}],\&quot;entrypoint\&quot;:\&quot;entrypoint\&quot;,\&quot;arguments\&quot;:{},\&quot;serviceAccountName\&quot;:\&quot;default-editor\&quot;,\&quot;podMetadata\&quot;:{\&quot;annotations\&quot;:{\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;},\&quot;labels\&quot;:{\&quot;pipeline/runid\&quot;:\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\&quot;,\&quot;pipelines.kubeflow.org/v2_component\&quot;:\&quot;true\&quot;}}},\&quot;status\&quot;:{\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;4/5\&quot;,\&quot;nodes\&quot;:{\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;displayName\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;entrypoint\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;4/5\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:137,\&quot;memory\&quot;:134},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-2094096536\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-1224221736\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-1224221736\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.collect-filtered-logs-driver\&quot;,\&quot;displayName\&quot;:\&quot;collect-filtered-logs-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:06Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:14:11Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:4,\&quot;memory\&quot;:3},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-collect-filtered-logs\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}},\\\&quot;outputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;output_report\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}}}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;254\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:\\\\\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\\\\\&quot;, \\\\\\\&quot;log_keywords\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;}]}}, \\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}, \\\\\\\&quot;log_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}}}, \\\\\\\&quot;outputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-collect-filtered-logs\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-driver-1224221736/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.collect-filtered-logs\&quot;,\&quot;displayName\&quot;:\&quot;collect-filtered-logs\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;system-container-executor\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:16Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:21Z\&quot;,\&quot;progress\&quot;:\&quot;2/3\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:130,\&quot;memory\&quot;:129},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;254\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:\\\\\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\\\\\&quot;, \\\\\\\&quot;log_keywords\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;}]}}, \\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}, \\\\\\\&quot;log_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}}}, \\\\\\\&quot;outputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-collect-filtered-logs\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root\&quot;,\&quot;displayName\&quot;:\&quot;root\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;root\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:06Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;3/4\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:134,\&quot;memory\&quot;:132},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-1224221736\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-2094096536\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2094096536\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root-driver\&quot;,\&quot;displayName\&quot;:\&quot;root-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-dag-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:13:56Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:14:00Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;dag\\\&quot;:{\\\&quot;tasks\\\&quot;:{\\\&quot;collect-filtered-logs\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-collect-filtered-logs\\\&quot;},\\\&quot;inputs\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;event_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;event_keywords\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;log_keywords\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}},\\\&quot;upload-to-github\\\&quot;:{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}}},\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;event_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;log_keywords\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;defaultValue\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;,\\\&quot;isOptional\\\&quot;:true,\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;runtime-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;parameterValues\\\&quot;:{\\\&quot;branch\\\&quot;:\\\&quot;report\\\&quot;,\\\&quot;event_keywords\\\&quot;:\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\&quot;,\\\&quot;github_token\\\&quot;:\\\&quot;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\\\&quot;,\\\&quot;log_keywords\\\&quot;:\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\&quot;,\\\&quot;repo_url\\\&quot;:\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;default\&quot;:\&quot;0\&quot;,\&quot;value\&quot;:\&quot;0\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;driver-type\&quot;,\&quot;default\&quot;:\&quot;DAG\&quot;,\&quot;value\&quot;:\&quot;ROOT_DAG\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;execution-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/execution-id\&quot;}},{\&quot;name\&quot;:\&quot;iteration-count\&quot;,\&quot;value\&quot;:\&quot;0\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/iteration-count\&quot;,\&quot;default\&quot;:\&quot;0\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-dag-driver-2094096536/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-3160090457\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3160090457\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.upload-to-github-driver\&quot;,\&quot;displayName\&quot;:\&quot;upload-to-github-driver\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-driver\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:15:21Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:24Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:3,\&quot;memory\&quot;:2},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;component\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;executorLabel\\\&quot;:\\\&quot;exec-upload-to-github\\\&quot;,\\\&quot;inputDefinitions\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;artifactType\\\&quot;:{\\\&quot;schemaTitle\\\&quot;:\\\&quot;system.Dataset\\\&quot;,\\\&quot;schemaVersion\\\&quot;:\\\&quot;0.0.1\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;parameterType\\\&quot;:\\\&quot;STRING\\\&quot;}}}}\&quot;},{\&quot;name\&quot;:\&quot;task\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;cachingOptions\\\&quot;:{},\\\&quot;componentRef\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;comp-upload-to-github\\\&quot;},\\\&quot;dependentTasks\\\&quot;:[\\\&quot;collect-filtered-logs\\\&quot;],\\\&quot;inputs\\\&quot;:{\\\&quot;artifacts\\\&quot;:{\\\&quot;report_file\\\&quot;:{\\\&quot;taskOutputArtifact\\\&quot;:{\\\&quot;outputArtifactKey\\\&quot;:\\\&quot;output_report\\\&quot;,\\\&quot;producerTask\\\&quot;:\\\&quot;collect-filtered-logs\\\&quot;}}},\\\&quot;parameters\\\&quot;:{\\\&quot;branch\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;branch\\\&quot;},\\\&quot;github_token\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;github_token\\\&quot;},\\\&quot;repo_url\\\&quot;:{\\\&quot;componentInputParameter\\\&quot;:\\\&quot;repo_url\\\&quot;}}},\\\&quot;taskInfo\\\&quot;:{\\\&quot;name\\\&quot;:\\\&quot;upload-to-github\\\&quot;}}\&quot;},{\&quot;name\&quot;:\&quot;container\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;args\\\&quot;:[\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;command\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;],\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;}\&quot;},{\&quot;name\&quot;:\&quot;parent-dag-id\&quot;,\&quot;value\&quot;:\&quot;253\&quot;},{\&quot;name\&quot;:\&quot;iteration-index\&quot;,\&quot;default\&quot;:\&quot;-1\&quot;,\&quot;value\&quot;:\&quot;-1\&quot;},{\&quot;name\&quot;:\&quot;kubernetes-config\&quot;,\&quot;default\&quot;:\&quot;\&quot;,\&quot;value\&quot;:\&quot;\&quot;}]},\&quot;outputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;255\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;name\\\\\\\&quot;:\\\\\\\&quot;52\\\\\\\&quot;, \\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;instanceSchema\\\\\\\&quot;:\\\\\\\&quot;\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;, \\\\\\\&quot;metadata\\\\\\\&quot;:{\\\\\\\&quot;display_name\\\\\\\&quot;:\\\\\\\&quot;output_report\\\\\\\&quot;}}]}}, \\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:\\\\\\\&quot;report\\\\\\\&quot;, \\\\\\\&quot;github_token\\\\\\\&quot;:\\\\\\\&quot;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\\\\\\\&quot;, \\\\\\\&quot;repo_url\\\\\\\&quot;:\\\\\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}, \\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;github_token\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;repo_url\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-upload-to-github\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/pod-spec-patch\&quot;,\&quot;default\&quot;:\&quot;\&quot;}},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;}},{\&quot;name\&quot;:\&quot;condition\&quot;,\&quot;value\&quot;:\&quot;nil\&quot;,\&quot;valueFrom\&quot;:{\&quot;path\&quot;:\&quot;/tmp/outputs/condition\&quot;,\&quot;default\&quot;:\&quot;true\&quot;}}],\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-driver-3160090457/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.upload-to-github\&quot;,\&quot;displayName\&quot;:\&quot;upload-to-github\&quot;,\&quot;type\&quot;:\&quot;DAG\&quot;,\&quot;templateName\&quot;:\&quot;system-container-executor\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-2090866031\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:15:31Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:51Z\&quot;,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:25,\&quot;memory\&quot;:25},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;255\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;name\\\\\\\&quot;:\\\\\\\&quot;52\\\\\\\&quot;, \\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;instanceSchema\\\\\\\&quot;:\\\\\\\&quot;\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;, \\\\\\\&quot;metadata\\\\\\\&quot;:{\\\\\\\&quot;display_name\\\\\\\&quot;:\\\\\\\&quot;output_report\\\\\\\&quot;}}]}}, \\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:\\\\\\\&quot;report\\\\\\\&quot;, \\\\\\\&quot;github_token\\\\\\\&quot;:\\\\\\\&quot;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\\\\\\\&quot;, \\\\\\\&quot;repo_url\\\\\\\&quot;:\\\\\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}, \\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;github_token\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;repo_url\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-upload-to-github\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;},{\&quot;name\&quot;:\&quot;cached-decision\&quot;,\&quot;default\&quot;:\&quot;false\&quot;,\&quot;value\&quot;:\&quot;false\&quot;}]},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;],\&quot;outboundNodes\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;]},\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3948683934\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.collect-filtered-logs.executor\&quot;,\&quot;displayName\&quot;:\&quot;executor\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-impl\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Succeeded\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-1878115775\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:14:16Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:11Z\&quot;,\&quot;progress\&quot;:\&quot;1/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:102,\&quot;memory\&quot;:102},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;254\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:\\\\\\\&quot;BackOff,FailedScheduling,NodeNotReady,Evicted,OutOfmemory\\\\\\\&quot;, \\\\\\\&quot;log_keywords\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,OOMKilled,<span class='keyword'>evicted</span>,<span class='keyword'>failed to start</span>,<span class='keyword'>deadline exceeded</span>,<span class='keyword'>node not ready</span>\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;}]}}, \\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;event_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}, \\\\\\\&quot;log_keywords\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;, \\\\\\\&quot;defaultValue\\\\\\\&quot;:\\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;, \\\\\\\&quot;isOptional\\\\\\\&quot;:true}}}, \\\\\\\&quot;outputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;output_report\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-collect-filtered-logs\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef collect_filtered_logs(\\\\n    output_report: Output[Dataset],\\\\n    log_keywords: str = \\\\\\\&quot;crash,error,fail,<span class='keyword'>oomkilled</span>,<span class='keyword'>evicted</span>\\\\\\\&quot;,\\\\n    event_keywords: str = \\\\\\\&quot;CrashLoopBackOff,Failed,Unhealthy,Evicted,OOME\\\\\\\&quot;\\\\n):\\\\n    import subprocess\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    tmp_report_path = \\\\\\\&quot;/tmp/report.html\\\\\\\&quot;\\\\n    excluded_namespace = \\\\\\\&quot;kubeflow-user-example-com\\\\\\\&quot;\\\\n\\\\n    subprocess.run([\\\\\\\&quot;apt-get\\\\\\\&quot;, \\\\\\\&quot;update\\\\\\\&quot;, \\\\\\\&quot;-y\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\n        \\\\\\\&quot;curl\\\\\\\&quot;, \\\\\\\&quot;-LO\\\\\\\&quot;, \\\\\\\&quot;https://storage.googleapis.com/kubernetes-release/release/v1.24.0/bin/linux/amd64/kubectl\\\\\\\&quot;\\\\n    ], check=True)\\\\n    subprocess.run([\\\\\\\&quot;chmod\\\\\\\&quot;, \\\\\\\&quot;+x\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;mv\\\\\\\&quot;, \\\\\\\&quot;kubectl\\\\\\\&quot;, \\\\\\\&quot;/usr/local/bin/\\\\\\\&quot;], check=True)\\\\n\\\\n    log_kw_list = [k.strip().lower() for k in log_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n    event_kw_list = [k.strip().lower() for k in event_keywords.split(\\\\\\\&quot;,\\\\\\\&quot;)]\\\\n\\\\n    seen_namespaces = set()\\\\n    namespace_events = {}\\\\n    alert_pods_summary = []\\\\n\\\\n    # Pod 상태 수집\\\\n    pods_output = subprocess.getoutput(\\\\n        \\\\\\\&quot;kubectl get pods --all-namespaces -o json\\\\\\\&quot;\\\\n    )\\\\n    import json\\\\n    pods_json = json.loads(pods_output)\\\\n\\\\n    pod_info_list = []\\\\n    for item in pods_json[\\\\\\\&quot;items\\\\\\\&quot;]:\\\\n        namespace = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;namespace\\\\\\\&quot;]\\\\n        if namespace == excluded_namespace:\\\\n            continue\\\\n        name = item[\\\\\\\&quot;metadata\\\\\\\&quot;][\\\\\\\&quot;name\\\\\\\&quot;]\\\\n        status = item[\\\\\\\&quot;status\\\\\\\&quot;].get(\\\\\\\&quot;phase\\\\\\\&quot;, \\\\\\\&quot;Unknown\\\\\\\&quot;)\\\\n        pod_info_list.append((namespace, name, status))\\\\n\\\\n    # HTML 시작\\\\n    with open(tmp_report_path, \\\\\\\&quot;w\\\\\\\&quot;) as f:\\\\n        f.write(\\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;\\\\n        \\\\u003chtml\\\\u003e\\\\n        \\\\u003chead\\\\u003e\\\\n            \\\\u003cmeta charset=\\\\\\\&quot;UTF-8\\\\\\\&quot;\\\\u003e\\\\n            \\\\u003cstyle\\\\u003e\\\\n                body {{ font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }}\\\\n                h1 {{ color: #2c3e50; }}\\\\n                h2 {{ color: #34495e; border-bottom: 1px solid #ccc; padding-bottom: 5px; }}\\\\n                h3 {{ color: #2980b9; }}\\\\n                pre {{ background-color: #ecf0f1; padding: 10px; border-left: 4px solid #3498db; white-space: pre-wrap; word-wrap: break-word; }}\\\\n                section {{ margin-bottom: 30px; }}\\\\n                .keyword {{ color: red; font-weight: bold; }}\\\\n                .no-events {{ font-style: italic; color: #888; }}\\\\n                .summary-box {{ background-color: #ffeaa7; padding: 10px; border: 1px solid #e1b12c; border-radius: 10px; margin-bottom: 30px; }}\\\\n            \\\\u003c/style\\\\u003e\\\\n        \\\\u003c/head\\\\u003e\\\\n        \\\\u003cbody\\\\u003e\\\\n        \\\\u003ch1\\\\u003eKubernetes 장애 점검 리포트\\\\u003c/h1\\\\u003e\\\\n        \\\\\\\&quot;\\\\\\\&quot;\\\\\\\&quot;)\\\\n\\\\n        # Pod 상태별 처리\\\\n        for namespace, pod_name, status in pod_info_list:\\\\n            describe = subprocess.getoutput(f\\\\\\\&quot;kubectl describe pod {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n            logs = subprocess.getoutput(f\\\\\\\&quot;kubectl logs {pod_name} -n {namespace}\\\\\\\&quot;)\\\\n\\\\n            matched_describe_lines = [\\\\n                l for l in describe.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ]\\\\n            matched_log_lines = [\\\\n                l for l in logs.splitlines()\\\\n                if any(k in l.lower() for k in log_kw_list)\\\\n            ][-10:]\\\\n\\\\n            matched_keywords = set()\\\\n            for line in matched_describe_lines + matched_log_lines:\\\\n                for kw in log_kw_list:\\\\n                    if kw in line.lower():\\\\n                        matched_keywords.add(kw)\\\\n\\\\n            # 상태에 따른 색상 이모지\\\\n            status_lower = status.lower()\\\\n            if status_lower == \\\\\\\&quot;running\\\\\\\&quot;:\\\\n                status_color = \\\\\\\&quot;🟢\\\\\\\&quot;\\\\n            elif any(w in status_lower for w in [\\\\\\\&quot;error\\\\\\\&quot;, \\\\\\\&quot;failed\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>crashloopbackoff</span>\\\\\\\&quot;, \\\\\\\&quot;<span class='keyword'>evicted</span>\\\\\\\&quot;]):\\\\n                status_color = \\\\\\\&quot;🔴\\\\\\\&quot;\\\\n            else:\\\\n                status_color = \\\\\\\&quot;🟠\\\\\\\&quot;\\\\n\\\\n            if matched_describe_lines or matched_log_lines:\\\\n                alert_pods_summary.append(\\\\n                    f\\\\\\\&quot;{status_color} {namespace}/{pod_name} → 키워드 감지: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\\\\&quot;\\\\n                )\\\\n                f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003e{status_color} Pod: {pod_name} (Namespace: {namespace}, 상태: {status}) - 감지된 키워드: {&#x27;, &#x27;.join(sorted(matched_keywords))}\\\\u003c/h2\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_describe_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eDescribe 결과\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_describe_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                if matched_log_lines:\\\\n                    f.write(\\\\\\\&quot;\\\\u003ch3\\\\u003eLog 결과 (최근 10줄)\\\\u003c/h3\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n                    for line in matched_log_lines:\\\\n                        for kw in log_kw_list:\\\\n                            if kw in line.lower():\\\\n                                line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                        f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n                    f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n                f.write(\\\\\\\&quot;\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n            # 이벤트 수집\\\\n            if namespace not in seen_namespaces:\\\\n                events = subprocess.getoutput(f\\\\\\\&quot;kubectl get events -n {namespace} --sort-by=.lastTimestamp\\\\\\\&quot;)\\\\n                matched_events = [\\\\n                    l for l in events.splitlines()\\\\n                    if any(k in l.lower() for k in event_kw_list)\\\\n                ]\\\\n                namespace_events[namespace] = matched_events\\\\n                seen_namespaces.add(namespace)\\\\n\\\\n        # 문제 요약 출력\\\\n        if alert_pods_summary:\\\\n            f.write(\\\\\\\&quot;\\\\u003cdiv class=&#x27;summary-box&#x27;\\\\u003e\\\\u003ch2\\\\u003e⚠️ 문제 발생 Pod 요약\\\\u003c/h2\\\\u003e\\\\u003cul\\\\u003e\\\\\\\&quot;)\\\\n            for item in alert_pods_summary:\\\\n                f.write(f\\\\\\\&quot;\\\\u003cli\\\\u003e{item}\\\\u003c/li\\\\u003e\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/ul\\\\u003e\\\\u003c/div\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        # 이벤트 출력\\\\n        for ns in sorted(seen_namespaces):\\\\n            f.write(f\\\\\\\&quot;\\\\u003csection\\\\u003e\\\\u003ch2\\\\u003eNamespace 이벤트: {ns}\\\\u003c/h2\\\\u003e\\\\u003cpre\\\\u003e\\\\\\\&quot;)\\\\n            events = namespace_events.get(ns, [])\\\\n            if events:\\\\n                for line in events:\\\\n                    for kw in event_kw_list:\\\\n                        if kw in line.lower():\\\\n                            line = line.replace(kw, f\\\\\\\&quot;\\\\u003cspan class=&#x27;keyword&#x27;\\\\u003e{kw}\\\\u003c/span\\\\u003e\\\\\\\&quot;)\\\\n                    f.write(f\\\\\\\&quot;{line}\\\\\\\\n\\\\\\\&quot;)\\\\n            else:\\\\n                f.write(\\\\\\\&quot;\\\\u003cspan class=&#x27;no-events&#x27;\\\\u003e🔍 감지된 이벤트 없음 (지정된 키워드 없음)\\\\u003c/span\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n            f.write(\\\\\\\&quot;\\\\u003c/pre\\\\u003e\\\\u003c/section\\\\u003e\\\\\\\\n\\\\\\\&quot;)\\\\n\\\\n        f.write(\\\\\\\&quot;\\\\u003c/body\\\\u003e\\\\u003c/html\\\\u003e\\\\\\\&quot;)\\\\n\\\\n    subprocess.run([\\\\\\\&quot;cp\\\\\\\&quot;, tmp_report_path, output_report.path], check=True)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;collect_filtered_logs\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;}]},\&quot;outputs\&quot;:{\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-impl-3948683934/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;0\&quot;},\&quot;children\&quot;:[\&quot;pod-log-pipeline-advance-version-m9f6j-3160090457\&quot;],\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;},\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;:{\&quot;id\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-58911351\&quot;,\&quot;name\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j.root.upload-to-github.executor\&quot;,\&quot;displayName\&quot;:\&quot;executor\&quot;,\&quot;type\&quot;:\&quot;Pod\&quot;,\&quot;templateName\&quot;:\&quot;system-container-impl\&quot;,\&quot;templateScope\&quot;:\&quot;local/pod-log-pipeline-advance-version-m9f6j\&quot;,\&quot;phase\&quot;:\&quot;Failed\&quot;,\&quot;boundaryID\&quot;:\&quot;pod-log-pipeline-advance-version-m9f6j-3352850164\&quot;,\&quot;message\&quot;:\&quot;Error (exit code 1)\&quot;,\&quot;startedAt\&quot;:\&quot;2025-05-14T01:15:31Z\&quot;,\&quot;finishedAt\&quot;:\&quot;2025-05-14T01:15:46Z\&quot;,\&quot;progress\&quot;:\&quot;0/1\&quot;,\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:25,\&quot;memory\&quot;:25},\&quot;inputs\&quot;:{\&quot;parameters\&quot;:[{\&quot;name\&quot;:\&quot;pod-spec-patch\&quot;,\&quot;value\&quot;:\&quot;{\\\&quot;containers\\\&quot;:[{\\\&quot;name\\\&quot;:\\\&quot;main\\\&quot;,\\\&quot;image\\\&quot;:\\\&quot;python:3.9\\\&quot;,\\\&quot;command\\\&quot;:[\\\&quot;/var/run/argo/argoexec\\\&quot;,\\\&quot;emissary\\\&quot;,\\\&quot;--\\\&quot;,\\\&quot;/kfp-launcher/launch\\\&quot;,\\\&quot;--pipeline_name\\\&quot;,\\\&quot;pod-log-pipeline-advance-version\\\&quot;,\\\&quot;--run_id\\\&quot;,\\\&quot;81d0b0e0-78c7-47ca-81ac-dc03c8498cf4\\\&quot;,\\\&quot;--execution_id\\\&quot;,\\\&quot;255\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{\\\\\\\&quot;inputs\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:[{\\\\\\\&quot;name\\\\\\\&quot;:\\\\\\\&quot;52\\\\\\\&quot;, \\\\\\\&quot;type\\\\\\\&quot;:{\\\\\\\&quot;instanceSchema\\\\\\\&quot;:\\\\\\\&quot;\\\\\\\&quot;}, \\\\\\\&quot;uri\\\\\\\&quot;:\\\\\\\&quot;minio://mlpipeline/v2/artifacts/pod-log-pipeline-advance-version/81d0b0e0-78c7-47ca-81ac-dc03c8498cf4/collect-filtered-logs/output_report\\\\\\\&quot;, \\\\\\\&quot;metadata\\\\\\\&quot;:{\\\\\\\&quot;display_name\\\\\\\&quot;:\\\\\\\&quot;output_report\\\\\\\&quot;}}]}}, \\\\\\\&quot;parameterValues\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:\\\\\\\&quot;report\\\\\\\&quot;, \\\\\\\&quot;github_token\\\\\\\&quot;:\\\\\\\&quot;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\\\\\\\&quot;, \\\\\\\&quot;repo_url\\\\\\\&quot;:\\\\\\\&quot;https://github.com/Rosa1026/Kubeflow.git\\\\\\\&quot;}}, \\\\\\\&quot;outputs\\\\\\\&quot;:{\\\\\\\&quot;outputFile\\\\\\\&quot;:\\\\\\\&quot;/tmp/kfp_outputs/output_metadata.json\\\\\\\&quot;}}\\\&quot;,\\\&quot;--component_spec\\\&quot;,\\\&quot;{\\\\\\\&quot;inputDefinitions\\\\\\\&quot;:{\\\\\\\&quot;artifacts\\\\\\\&quot;:{\\\\\\\&quot;report_file\\\\\\\&quot;:{\\\\\\\&quot;artifactType\\\\\\\&quot;:{\\\\\\\&quot;schemaTitle\\\\\\\&quot;:\\\\\\\&quot;system.Dataset\\\\\\\&quot;, \\\\\\\&quot;schemaVersion\\\\\\\&quot;:\\\\\\\&quot;0.0.1\\\\\\\&quot;}}}, \\\\\\\&quot;parameters\\\\\\\&quot;:{\\\\\\\&quot;branch\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;github_token\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}, \\\\\\\&quot;repo_url\\\\\\\&quot;:{\\\\\\\&quot;parameterType\\\\\\\&quot;:\\\\\\\&quot;STRING\\\\\\\&quot;}}}, \\\\\\\&quot;executorLabel\\\\\\\&quot;:\\\\\\\&quot;exec-upload-to-github\\\\\\\&quot;}\\\&quot;,\\\&quot;--pod_name\\\&quot;,\\\&quot;$(KFP_POD_NAME)\\\&quot;,\\\&quot;--pod_uid\\\&quot;,\\\&quot;$(KFP_POD_UID)\\\&quot;,\\\&quot;--mlmd_server_address\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_HOST)\\\&quot;,\\\&quot;--mlmd_server_port\\\&quot;,\\\&quot;$(METADATA_GRPC_SERVICE_PORT)\\\&quot;,\\\&quot;--\\\&quot;],\\\&quot;args\\\&quot;:[\\\&quot;sh\\\&quot;,\\\&quot;-c\\\&quot;,\\\&quot;\\\\nif ! [ -x \\\\\\\&quot;$(command -v pip)\\\\\\\&quot; ]; then\\\\n    python3 -m ensurepip || python3 -m ensurepip --user || apt-get install python3-pip\\\\nfi\\\\n\\\\nPIP_DISABLE_PIP_VERSION_CHECK=1 python3 -m pip install --quiet --no-warn-script-location &#x27;kfp==2.13.0&#x27; &#x27;--no-deps&#x27; &#x27;typing-extensions\\\\u003e=3.7.4,\\\\u003c5; python_version\\\\u003c\\\\\\\&quot;3.9\\\\\\\&quot;&#x27;  \\\\u0026\\\\u0026  python3 -m pip install --quiet --no-warn-script-location &#x27;gitpython&#x27; \\\\u0026\\\\u0026 \\\\\\\&quot;$0\\\\\\\&quot; \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;sh\\\&quot;,\\\&quot;-ec\\\&quot;,\\\&quot;program_path=$(mktemp -d)\\\\n\\\\nprintf \\\\\\\&quot;%s\\\\\\\&quot; \\\\\\\&quot;$0\\\\\\\&quot; \\\\u003e \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;\\\\n_KFP_RUNTIME=true python3 -m kfp.dsl.executor_main                         --component_module_path                         \\\\\\\&quot;$program_path/ephemeral_component.py\\\\\\\&quot;                         \\\\\\\&quot;$@\\\\\\\&quot;\\\\n\\\&quot;,\\\&quot;\\\\nimport kfp\\\\nfrom kfp import dsl\\\\nfrom kfp.dsl import *\\\\nfrom typing import *\\\\n\\\\ndef upload_to_github(\\\\n    report_file: Input[Dataset],\\\\n    repo_url: str,\\\\n    github_token: str,\\\\n    branch: str\\\\n):\\\\n\\\\n    import subprocess\\\\n    import shutil\\\\n    import os\\\\n    from datetime import datetime\\\\n\\\\n    os.environ[\\\\\\\&quot;GIT_ASKPASS\\\\\\\&quot;] = \\\\\\\&quot;echo\\\\\\\&quot;\\\\n\\\\n    report_path = report_file.path\\\\n    print(\\\\\\\&quot;Checking if report exists at:\\\\\\\&quot;, report_path)\\\\n    if not os.path.exists(report_path):\\\\n        raise FileNotFoundError(f\\\\\\\&quot;{report_path} does not exist\\\\\\\&quot;)\\\\n\\\\n    # HTML 파일 이름 만들기\\\\n    timestamp = datetime.now().strftime(\\\\\\\&quot;report-%Y%m%d-%H%M%S.html\\\\\\\&quot;)\\\\n    safe_repo_url = repo_url.replace(\\\\\\\&quot;https://\\\\\\\&quot;, f\\\\\\\&quot;https://{github_token}@\\\\\\\&quot;)\\\\n    repo_dir = \\\\\\\&quot;/tmp/repo\\\\\\\&quot;\\\\n    report_target_path = os.path.join(repo_dir, timestamp)\\\\n\\\\n    # Git clone\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;clone\\\\\\\&quot;, \\\\\\\&quot;--branch\\\\\\\&quot;, branch, safe_repo_url, repo_dir], check=True)\\\\n    shutil.copyfile(report_path, report_target_path)\\\\n\\\\n    # Git config\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.email\\\\\\\&quot;, \\\\\\\&quot;ci@example.com\\\\\\\&quot;], check=True)\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;config\\\\\\\&quot;, \\\\\\\&quot;user.name\\\\\\\&quot;, \\\\\\\&quot;CI Bot\\\\\\\&quot;], check=True)\\\\n\\\\n    # Git commit \\\\u0026 push\\\\n    subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;add\\\\\\\&quot;, \\\\\\\&quot;.\\\\\\\&quot;], check=True)\\\\n    result = subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;status\\\\\\\&quot;, \\\\\\\&quot;--porcelain\\\\\\\&quot;], capture_output=True, text=True)\\\\n\\\\n    if result.stdout.strip():\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;commit\\\\\\\&quot;, \\\\\\\&quot;-m\\\\\\\&quot;, f\\\\\\\&quot;Add {timestamp}\\\\\\\&quot;], check=True)\\\\n        subprocess.run([\\\\\\\&quot;git\\\\\\\&quot;, \\\\\\\&quot;-C\\\\\\\&quot;, repo_dir, \\\\\\\&quot;push\\\\\\\&quot;], check=True)\\\\n        print(f\\\\\\\&quot;Report committed and pushed to GitHub as {timestamp}.\\\\\\\&quot;)\\\\n    else:\\\\n        print(\\\\\\\&quot;No changes to commit. Skipping.\\\\\\\&quot;)\\\\n\\\\n\\\&quot;,\\\&quot;--executor_input\\\&quot;,\\\&quot;{{$}}\\\&quot;,\\\&quot;--function_to_execute\\\&quot;,\\\&quot;upload_to_github\\\&quot;],\\\&quot;resources\\\&quot;:{}}]}\&quot;}]},\&quot;outputs\&quot;:{\&quot;artifacts\&quot;:[{\&quot;name\&quot;:\&quot;main-logs\&quot;,\&quot;s3\&quot;:{\&quot;key\&quot;:\&quot;artifacts/pod-log-pipeline-advance-version-m9f6j/2025/05/14/pod-log-pipeline-advance-version-m9f6j-system-container-impl-58911351/main.log\&quot;}}],\&quot;exitCode\&quot;:\&quot;1\&quot;},\&quot;hostNodeName\&quot;:\&quot;k8s-kubeflow-worker01\&quot;}},\&quot;conditions\&quot;:[{\&quot;type\&quot;:\&quot;PodRunning\&quot;,\&quot;status\&quot;:\&quot;False\&quot;},{\&quot;type\&quot;:\&quot;Completed\&quot;,\&quot;status\&quot;:\&quot;True\&quot;}],\&quot;resourcesDuration\&quot;:{\&quot;cpu\&quot;:137,\&quot;memory\&quot;:134},\&quot;artifactRepositoryRef\&quot;:{\&quot;default\&quot;:true,\&quot;artifactRepository\&quot;:{\&quot;archiveLogs\&quot;:true,\&quot;s3\&quot;:{\&quot;endpoint\&quot;:\&quot;minio-service.kubeflow:9000\&quot;,\&quot;bucket\&quot;:\&quot;mlpipeline\&quot;,\&quot;insecure\&quot;:true,\&quot;accessKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;accesskey\&quot;},\&quot;secretKeySecret\&quot;:{\&quot;name\&quot;:\&quot;mlpipeline-minio-artifact\&quot;,\&quot;key\&quot;:\&quot;secretkey\&quot;},\&quot;keyFormat\&quot;:\&quot;artifacts/{{workflow.name}}/{{workflow.creationTimestamp.Y}}/{{workflow.creationTimestamp.m}}/{{workflow.creationTimestamp.d}}/{{pod.name}}\&quot;}}},\&quot;artifactGCStatus\&quot;:{\&quot;notSpecified\&quot;:true}}}: rpc error: code = Unauthenticated desc = Jwt is expired&quot;
</pre>
</section>
</body></html>